<!DOCTYPE html>
<html lang="en" class="h-full bg-slate-950 text-slate-100">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SAF HUB - West Africa's SAF Market Intelligence Platform</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    body { font-family: 'Inter', system-ui, -apple-system, sans-serif; }
    .glass { background: rgba(15, 23, 42, 0.75); border: 1px solid rgba(148, 163, 184, 0.15); box-shadow: 0 20px 80px rgba(8, 47, 73, 0.35); backdrop-filter: blur(12px); }

    /* Toggle Switch Styles */
    .toggle-switch { position: relative; display: inline-block; width: 44px; height: 24px; }
    .toggle-switch input { opacity: 0; width: 0; height: 0; }
    .toggle-slider {
      position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0;
      background-color: #475569; border-radius: 24px; transition: 0.3s;
    }
    .toggle-slider:before {
      position: absolute; content: ""; height: 18px; width: 18px; left: 3px; bottom: 3px;
      background-color: white; border-radius: 50%; transition: 0.3s;
    }
    input:checked + .toggle-slider { background-color: #10b981; }
    input:checked + .toggle-slider:before { transform: translateX(20px); }
  </style>
</head>
<body class="h-full">
  <div class="min-h-screen flex flex-col bg-gradient-to-b from-slate-950 via-slate-900 to-slate-950">
    <!-- Demo Mode Banner -->
    <div id="demo-banner" class="hidden bg-gradient-to-r from-amber-500/20 via-orange-500/20 to-amber-500/20 border-b border-amber-500/30 py-2 px-6">
      <div class="max-w-6xl mx-auto flex items-center justify-center gap-2 text-sm">
        <span class="text-amber-200">üìä Demo Mode</span>
        <span class="text-amber-100/80">‚Äî</span>
        <span class="text-slate-300">Sample data shown for illustration</span>
      </div>
    </div>

    <header class="relative overflow-hidden">
      <div class="absolute inset-0 bg-[radial-gradient(circle_at_20%_20%,rgba(52,211,153,0.15),transparent_25%),radial-gradient(circle_at_80%_0%,rgba(59,130,246,0.12),transparent_25%)]"></div>
      <div class="max-w-6xl mx-auto px-6 py-14 relative z-10">
        <div class="flex items-center justify-between">
          <div class="flex items-center gap-3">
            <div class="h-12 w-12 rounded-2xl bg-gradient-to-tr from-emerald-400 via-cyan-400 to-blue-500 flex items-center justify-center text-slate-900 font-bold shadow-lg shadow-emerald-500/30">SH</div>
            <div>
              <p class="text-sm uppercase tracking-[0.22em] text-emerald-300/80">SAF HUB</p>
              <h1 class="text-3xl md:text-4xl font-semibold text-slate-50">West Africa's SAF Market Intelligence Platform</h1>
            </div>
          </div>
          <div class="flex items-center gap-4">
            <div class="flex items-center gap-2 bg-slate-800/50 px-3 py-2 rounded-xl border border-slate-700/50">
              <span class="text-xs text-slate-300">Demo Mode</span>
              <label class="toggle-switch">
                <input type="checkbox" id="demo-mode-toggle" checked>
                <span class="toggle-slider"></span>
              </label>
            </div>
            <a href="https://www.linkedin.com/company/biojet-nigeria-limited/" class="hidden md:inline-flex items-center px-4 py-2 rounded-xl text-sm font-medium bg-gradient-to-r from-emerald-500 to-blue-500 text-slate-900 shadow-md shadow-emerald-500/30 hover:-translate-y-0.5 transition">LinkedIn</a>
          </div>
        </div>
        <div class="mt-12 grid md:grid-cols-2 gap-8 items-center">
          <div class="space-y-6">
            <p class="text-4xl md:text-5xl font-semibold leading-tight text-slate-50">Accelerating Decarbonization of West African Aviation</p>
            <p class="text-lg text-slate-300 max-w-2xl">Real-time insight on biomass economics, regulatory shifts, and capital signals driving sustainable aviation fuel deployment across Nigeria and West Africa.</p>
            <div class="flex flex-wrap gap-4">
              <a href="https://www.linkedin.com/company/biojet-nigeria-limited/" class="inline-flex items-center px-4 py-2 rounded-xl text-sm font-medium bg-emerald-500 text-slate-900 shadow-md shadow-emerald-500/30 hover:-translate-y-0.5 transition">Connect on LinkedIn</a>
              <span class="inline-flex items-center px-4 py-2 rounded-xl text-sm font-medium border border-slate-700 text-slate-200">Live intelligence ¬∑ Updated daily</span>
            </div>
          </div>
          <div class="glass rounded-2xl p-6 border border-emerald-500/20">
            <div class="flex items-center gap-3 pb-4 border-b border-slate-800">
              <span class="h-3 w-3 rounded-full bg-emerald-400 animate-pulse"></span>
              <p class="text-sm uppercase tracking-[0.18em] text-emerald-200">Operational Intelligence</p>
            </div>
            <ul class="divide-y divide-slate-800 text-sm mt-4">
              <li class="py-3 flex items-center justify-between">
                <div>
                  <p class="text-slate-200 font-medium">Supply Stack Monitoring</p>
                  <p class="text-slate-400">Feedstock economics, yield viability, aggregation signals</p>
                </div>
                <span class="px-3 py-1 rounded-full bg-emerald-500/20 text-emerald-200 text-xs">Stable</span>
              </li>
              <li class="py-3 flex items-center justify-between">
                <div>
                  <p class="text-slate-200 font-medium">Policy &amp; Certs</p>
                  <p class="text-slate-400">ICAO, NCAA, and emerging SAF incentives</p>
                </div>
                <span class="px-3 py-1 rounded-full bg-blue-500/20 text-blue-200 text-xs">Tracking</span>
              </li>
              <li class="py-3 flex items-center justify-between">
                <div>
                  <p class="text-slate-200 font-medium">Capital Formation</p>
                  <p class="text-slate-400">Project finance, grants, concessional capital</p>
                </div>
                <span class="px-3 py-1 rounded-full bg-amber-500/20 text-amber-200 text-xs">New</span>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </header>

    <main class="flex-1">
      <section class="max-w-6xl mx-auto px-6 mt-12">
        <div class="grid md:grid-cols-3 gap-6">
          <div class="glass rounded-2xl p-5 border border-emerald-500/20">
            <p class="text-sm text-slate-400">Biomass Price Index</p>
            <h3 class="text-3xl font-semibold text-emerald-300 mt-2" id="latest-price">‚Ç¶--,---</h3>
            <p class="text-xs text-slate-500 mt-1" id="last-updated">Loading...</p>
            <p class="text-xs text-slate-500 mt-2">Median cassava peel &amp; residue value per tonne (monitoring weekly volatility).</p>
          </div>
          <div class="glass rounded-2xl p-5 border border-blue-500/20">
            <p class="text-sm text-slate-400">Regulatory Alerts</p>
            <h3 class="text-3xl font-semibold text-blue-300 mt-2" id="alerts-count">--</h3>
            <p class="text-xs text-slate-500 mt-1" id="alerts-summary">Loading...</p>
            <p class="text-xs text-slate-500 mt-2">Latest updates from ICAO, EASA, NCAA and regional aviation authorities.</p>
          </div>
          <div class="glass rounded-2xl p-5 border border-emerald-500/20">
            <p class="text-sm text-slate-400">Funding Tracker</p>
            <h3 class="text-3xl font-semibold text-emerald-300 mt-2" id="funding-count">--</h3>
            <p class="text-xs text-slate-500 mt-1" id="funding-summary">Loading...</p>
            <p class="text-xs text-slate-500 mt-2">Active SAF-linked pipelines including concessional debt, grants, and blended finance.</p>
          </div>
        </div>
      </section>

      <!-- Capital Signals Section -->
      <section class="max-w-6xl mx-auto px-6 mt-12">
        <div class="glass rounded-2xl p-6 border border-emerald-500/20">
          <div class="flex items-center gap-3 mb-6">
            <div class="h-10 w-10 rounded-xl bg-gradient-to-br from-emerald-500 to-amber-500 flex items-center justify-center text-slate-900 font-semibold">$</div>
            <div>
              <p class="text-sm uppercase tracking-[0.14em] text-emerald-200">Capital Signals</p>
              <h2 class="text-2xl font-semibold text-slate-50">Funding Opportunities</h2>
            </div>
          </div>
          <div id="capital-signals-list" class="grid md:grid-cols-2 gap-4">
            <p class="text-slate-400 text-sm">Loading funding opportunities...</p>
          </div>
        </div>
      </section>

      <!-- Technology Pathway Economics Visualization -->
      <section class="max-w-6xl mx-auto px-6 mt-12">
        <div class="glass rounded-2xl p-6 border border-cyan-500/20">
          <div class="flex items-center gap-3 mb-6">
            <div class="h-10 w-10 rounded-xl bg-gradient-to-br from-cyan-500 to-blue-500 flex items-center justify-center text-slate-900 font-semibold">‚öóÔ∏è</div>
            <div>
              <p class="text-sm uppercase tracking-[0.14em] text-cyan-200">Technology Diligence</p>
              <h2 class="text-2xl font-semibold text-slate-50">SAF Pathway Economics</h2>
            </div>
          </div>
          <div id="pathway-economics" class="grid md:grid-cols-5 gap-4 mb-6">
            <p class="text-slate-400 text-sm col-span-5">Loading pathway data...</p>
          </div>
          <div class="border-t border-slate-700 pt-6">
            <h3 class="text-lg font-medium text-slate-200 mb-4">Latest Technology Updates</h3>
            <div id="tech-updates-list" class="space-y-3">
              <p class="text-slate-400 text-sm">Loading technology updates...</p>
            </div>
          </div>
        </div>
      </section>

      <!-- Market Access Section -->
      <section class="max-w-6xl mx-auto px-6 mt-12">
        <div class="glass rounded-2xl p-6 border border-purple-500/20">
          <div class="flex items-center gap-3 mb-6">
            <div class="h-10 w-10 rounded-xl bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center text-slate-900 font-semibold">‚úàÔ∏è</div>
            <div>
              <p class="text-sm uppercase tracking-[0.14em] text-purple-200">Market Access</p>
              <h2 class="text-2xl font-semibold text-slate-50">Airline Offtake Signals</h2>
            </div>
          </div>
          <div id="market-signals-list" class="space-y-4">
            <p class="text-slate-400 text-sm">Loading market signals...</p>
          </div>
        </div>
      </section>

      <!-- Editorial / Community Pulse Section -->
      <section class="max-w-6xl mx-auto px-6 mt-12">
        <div class="glass rounded-2xl p-6 border border-amber-500/20">
          <div class="flex items-center gap-3 mb-6">
            <div class="h-10 w-10 rounded-xl bg-gradient-to-br from-amber-500 to-orange-500 flex items-center justify-center text-slate-900 font-semibold">üì∞</div>
            <div>
              <p class="text-sm uppercase tracking-[0.14em] text-amber-200">SAF HUB Editorial</p>
              <h2 class="text-2xl font-semibold text-slate-50">Insights & Analysis</h2>
            </div>
          </div>
          <div id="editorial-content" class="mb-6">
            <p class="text-slate-400 text-sm">Loading editorial content...</p>
          </div>
          <div class="border-t border-slate-700 pt-6">
            <h3 class="text-lg font-medium text-slate-200 mb-4">Community Sentiment</h3>
            <div class="flex items-center gap-4 mb-4">
              <div class="flex-1 bg-slate-800/50 rounded-full h-3 overflow-hidden">
                <div id="sentiment-bar" class="h-full bg-gradient-to-r from-emerald-500 to-cyan-500 rounded-full transition-all" style="width: 50%"></div>
              </div>
              <span id="sentiment-label" class="text-sm text-slate-300">Loading...</span>
            </div>
            <div id="community-signals-list" class="space-y-3">
              <p class="text-slate-400 text-sm">Loading community signals...</p>
            </div>
          </div>
        </div>
      </section>

      <section class="max-w-6xl mx-auto px-6 mt-12">
        <div class="glass rounded-2xl p-6 border border-blue-500/20">
          <div class="flex items-center gap-3 mb-6">
            <div class="h-10 w-10 rounded-xl bg-gradient-to-br from-blue-500 to-cyan-500 flex items-center justify-center text-slate-900 font-semibold">PR</div>
            <div>
              <p class="text-sm uppercase tracking-[0.14em] text-blue-200">Policy Radar</p>
              <h2 class="text-2xl font-semibold text-slate-50">Latest Regulatory Updates</h2>
            </div>
          </div>
          <div id="regulatory-alerts-list" class="space-y-4">
            <p class="text-slate-400 text-sm">Loading regulatory alerts...</p>
          </div>
        </div>
      </section>

      <section class="max-w-6xl mx-auto px-6 mt-12 grid lg:grid-cols-2 gap-8 items-start">
        <div class="glass rounded-2xl p-6 border border-slate-800">
          <div class="flex items-center gap-3 mb-4">
            <div class="h-10 w-10 rounded-xl bg-gradient-to-br from-emerald-500 to-blue-500 flex items-center justify-center text-slate-900 font-semibold">NG</div>
            <div>
              <p class="text-sm uppercase tracking-[0.14em] text-emerald-200">Nigerian SAF Opportunity</p>
              <h2 class="text-2xl font-semibold text-slate-50">Cassava-driven circular feedstock</h2>
            </div>
          </div>
          <p class="text-slate-300 leading-relaxed">Cassava processing yields substantial peel and pulp residues that can be valorized into ethanol and SAF pathways. Nigeria produces over <span class="text-emerald-300 font-semibold">60M tonnes</span> of cassava annually, positioning the country as a strategic supplier for West African decarbonization.</p>
          <div class="mt-6 grid grid-cols-3 gap-4 text-center">
            <div class="glass rounded-xl p-4 border border-emerald-500/10">
              <p class="text-xs text-slate-400">Cassava Output</p>
              <p class="text-2xl font-semibold text-emerald-300">60M</p>
              <p class="text-[11px] text-slate-500">tonnes / year</p>
            </div>
            <div class="glass rounded-xl p-4 border border-emerald-500/10">
              <p class="text-xs text-slate-400">Residue Recovery</p>
              <p class="text-2xl font-semibold text-blue-300">35%</p>
              <p class="text-[11px] text-slate-500">collection efficiency</p>
            </div>
            <div class="glass rounded-xl p-4 border border-emerald-500/10">
              <p class="text-xs text-slate-400">SAF Yield</p>
              <p class="text-2xl font-semibold text-emerald-300">9-12%</p>
              <p class="text-[11px] text-slate-500">conversion pathway</p>
            </div>
          </div>
        </div>

        <div class="glass rounded-2xl p-6 border border-slate-800">
          <div class="flex items-center gap-3 mb-4">
            <div class="h-10 w-10 rounded-xl bg-gradient-to-br from-blue-500 to-emerald-500 flex items-center justify-center text-slate-900 font-semibold">AI</div>
            <div>
              <p class="text-sm uppercase tracking-[0.14em] text-emerald-200">Intelligence Agents</p>
              <h2 class="text-2xl font-semibold text-slate-50">Status &amp; Signal Quality</h2>
            </div>
          </div>
          <div class="grid sm:grid-cols-2 gap-4">
            <div class="glass rounded-xl p-4 border border-emerald-500/15 flex items-center justify-between">
              <div>
                <p class="text-sm font-medium text-slate-200">Feedstock Watchdog</p>
                <p class="text-xs text-slate-500">Cassava peel &amp; ag-residue pricing</p>
              </div>
              <span class="px-3 py-1 rounded-full bg-emerald-500/20 text-emerald-200 text-xs">Online</span>
            </div>
            <div class="glass rounded-xl p-4 border border-blue-500/15 flex items-center justify-between">
              <div>
                <p class="text-sm font-medium text-slate-200">Policy Radar</p>
                <p class="text-xs text-slate-500">ICAO CORSIA, NCAA &amp; ECOWAS updates</p>
              </div>
              <span class="px-3 py-1 rounded-full bg-blue-500/20 text-blue-200 text-xs">Tracking</span>
            </div>
            <div class="glass rounded-xl p-4 border border-emerald-500/15 flex items-center justify-between">
              <div>
                <p class="text-sm font-medium text-slate-200">Capital Signals</p>
                <p class="text-xs text-slate-500">Grants, concessional debt, blended stacks</p>
              </div>
              <span class="px-3 py-1 rounded-full bg-emerald-500/20 text-emerald-200 text-xs">Live</span>
            </div>
            <div class="glass rounded-xl p-4 border border-blue-500/15 flex items-center justify-between">
              <div>
                <p class="text-sm font-medium text-slate-200">Technology Diligence</p>
                <p class="text-xs text-slate-500">HEFA/ETJ benchmarks &amp; pathway economics</p>
              </div>
              <span class="px-3 py-1 rounded-full bg-amber-500/20 text-amber-200 text-xs">Reviewing</span>
            </div>
            <div class="glass rounded-xl p-4 border border-emerald-500/15 flex items-center justify-between">
              <div>
                <p class="text-sm font-medium text-slate-200">Market Access</p>
                <p class="text-xs text-slate-500">Offtake readiness &amp; airline engagement</p>
              </div>
              <span class="px-3 py-1 rounded-full bg-emerald-500/20 text-emerald-200 text-xs">Stable</span>
            </div>
            <div class="glass rounded-xl p-4 border border-blue-500/15 flex items-center justify-between">
              <div>
                <p class="text-sm font-medium text-slate-200">Community Pulse</p>
                <p class="text-xs text-slate-500">Aggregator sentiment &amp; logistics friction</p>
              </div>
              <span class="px-3 py-1 rounded-full bg-blue-500/20 text-blue-200 text-xs">Listening</span>
            </div>
          </div>
        </div>
      </section>
    </main>

    <footer class="mt-16 border-t border-slate-800/80 bg-slate-950/80">
      <div class="max-w-6xl mx-auto px-6 py-8 flex flex-col md:flex-row items-start md:items-center justify-between gap-4">
        <div>
          <p class="text-slate-300 font-medium">Biojet Nigeria Limited</p>
          <p class="text-sm text-slate-500 mt-1">Biojet Nigeria Limited is a research-focused entity. We do not currently offer commercial consultancy services.</p>
        </div>
        <div class="flex items-center gap-3">
          <a href="https://www.linkedin.com/company/biojet-nigeria-limited/" class="text-sm text-emerald-300 hover:text-emerald-200">LinkedIn</a>
          <span class="text-slate-700">‚Ä¢</span>
          <span class="text-xs text-slate-500">Updated daily at 08:00 UTC</span>
        </div>
      </div>
    </footer>
  </div>

  <script>
    // Demo Mode Toggle Management
    let isDemoMode = true;

    function initDemoMode() {
      // Load preference from localStorage (default to true/demo mode)
      const saved = localStorage.getItem('safhub-demo-mode');
      isDemoMode = saved === null ? true : saved === 'true';

      // Set toggle state
      const toggle = document.getElementById('demo-mode-toggle');
      toggle.checked = isDemoMode;

      // Update banner visibility
      updateDemoBanner();

      // Add event listener
      toggle.addEventListener('change', function() {
        isDemoMode = this.checked;
        localStorage.setItem('safhub-demo-mode', isDemoMode);
        updateDemoBanner();
        // Reload all data
        loadLatestPrice();
        loadRegulatoryAlerts();
      });
    }

    function updateDemoBanner() {
      const banner = document.getElementById('demo-banner');
      if (isDemoMode) {
        banner.classList.remove('hidden');
      } else {
        banner.classList.add('hidden');
      }
    }

    // Fetch and display latest cassava peel price from data/prices.json
    async function loadLatestPrice() {
      try {
        const response = await fetch('data/prices.json');
        if (!response.ok) throw new Error('Failed to fetch price data');

        let prices = await response.json();

        // Filter by mode
        if (!isDemoMode) {
          prices = prices.filter(p => p.mode === 'live');
        }

        // Check if we have data
        if (prices.length === 0) {
          document.getElementById('latest-price').textContent = '‚Ç¶--,---';
          document.getElementById('last-updated').textContent = 'No live data yet ‚Äî agents collecting daily';
          return;
        }

        // Find the most recent entry (latest timestamp)
        const latestEntry = prices.reduce((latest, current) => {
          return new Date(current.timestamp) > new Date(latest.timestamp) ? current : latest;
        });

        // Format price with thousands separator
        const formattedPrice = '‚Ç¶' + latestEntry.price_per_tonne.toLocaleString('en-NG');

        // Determine badge
        const isLive = latestEntry.mode === 'live';
        const badge = isLive
          ? '<span class="ml-2 px-2 py-0.5 rounded-md bg-emerald-500/20 text-emerald-200 text-xs font-medium">LIVE</span>'
          : '<span class="ml-2 px-2 py-0.5 rounded-md bg-slate-500/20 text-slate-400 text-xs font-medium">DEMO</span>';

        // Format timestamp
        const date = new Date(latestEntry.timestamp);
        const formattedDate = date.toLocaleDateString('en-US', {
          year: 'numeric',
          month: 'short',
          day: 'numeric'
        });
        const formattedTime = date.toLocaleTimeString('en-US', {
          hour: '2-digit',
          minute: '2-digit',
          hour12: false
        });

        // Update DOM
        document.getElementById('latest-price').innerHTML = formattedPrice + badge;
        document.getElementById('last-updated').textContent = `Last updated: ${formattedDate} at ${formattedTime} UTC`;

      } catch (error) {
        console.error('Error loading price data:', error);
        document.getElementById('latest-price').textContent = '‚Ç¶--,---';
        document.getElementById('last-updated').textContent = 'Unable to load latest price';
      }
    }

    // Fetch and display latest regulatory alerts from data/regulatory_alerts.json
    async function loadRegulatoryAlerts() {
      try {
        const response = await fetch('data/regulatory_alerts.json');
        if (!response.ok) throw new Error('Failed to fetch regulatory alerts');

        let alerts = await response.json();

        // Filter by mode
        if (!isDemoMode) {
          alerts = alerts.filter(a => a.mode === 'live');
        }

        // Check if we have data
        if (alerts.length === 0) {
          document.getElementById('alerts-count').textContent = '--';
          document.getElementById('alerts-summary').textContent = 'No live data yet';
          document.getElementById('regulatory-alerts-list').innerHTML =
            '<p class="text-slate-400 text-sm">No live data yet ‚Äî agents collecting daily at 08:00 UTC</p>';
          return;
        }

        // Sort by timestamp (most recent first) and take latest 5
        const sortedAlerts = alerts.sort((a, b) =>
          new Date(b.timestamp) - new Date(a.timestamp)
        ).slice(0, 5);

        // Update count and summary
        document.getElementById('alerts-count').textContent = alerts.length;
        const latestDate = new Date(sortedAlerts[0].timestamp).toLocaleDateString('en-US', {
          month: 'short',
          day: 'numeric'
        });
        document.getElementById('alerts-summary').textContent = `Last update: ${latestDate}`;

        // Build alerts HTML
        const alertsList = document.getElementById('regulatory-alerts-list');
        alertsList.innerHTML = sortedAlerts.map(alert => {
          const date = new Date(alert.timestamp);
          const formattedDate = date.toLocaleDateString('en-US', {
            year: 'numeric',
            month: 'short',
            day: 'numeric'
          });

          // Source badge colors
          const badgeColors = {
            'ICAO': 'bg-blue-500/20 text-blue-200',
            'EASA': 'bg-cyan-500/20 text-cyan-200',
            'NCAA': 'bg-emerald-500/20 text-emerald-200'
          };
          const badgeClass = badgeColors[alert.source] || 'bg-slate-500/20 text-slate-200';

          // Mode badge
          const isLive = alert.mode === 'live';
          const modeBadge = isLive
            ? '<span class="px-2 py-0.5 rounded-md bg-emerald-500/20 text-emerald-200 text-[10px] font-medium">LIVE</span>'
            : '<span class="px-2 py-0.5 rounded-md bg-slate-500/20 text-slate-400 text-[10px] font-medium">DEMO</span>';

          return `
            <div class="glass rounded-xl p-4 border border-slate-700/50 hover:border-blue-500/30 transition">
              <div class="flex items-start justify-between gap-4">
                <div class="flex-1">
                  <a href="${alert.url}" target="_blank" rel="noopener noreferrer"
                     class="text-slate-100 font-medium hover:text-blue-300 transition text-sm leading-snug">
                    ${alert.title}
                  </a>
                  <div class="flex items-center gap-2 mt-2">
                    <span class="px-2 py-1 rounded-md ${badgeClass} text-xs font-medium">${alert.source}</span>
                    ${modeBadge}
                    <span class="text-xs text-slate-500">${formattedDate}</span>
                  </div>
                  ${alert.keywords_matched && alert.keywords_matched.length > 0 ? `
                    <div class="flex flex-wrap gap-1 mt-2">
                      ${alert.keywords_matched.slice(0, 3).map(keyword =>
                        `<span class="text-[10px] px-2 py-0.5 rounded bg-slate-800/50 text-slate-400">${keyword}</span>`
                      ).join('')}
                    </div>
                  ` : ''}
                </div>
              </div>
            </div>
          `;
        }).join('');

      } catch (error) {
        console.error('Error loading regulatory alerts:', error);
        document.getElementById('alerts-count').textContent = '--';
        document.getElementById('alerts-summary').textContent = 'Unable to load alerts';
        document.getElementById('regulatory-alerts-list').innerHTML =
          '<p class="text-slate-400 text-sm">Unable to load regulatory alerts. Please check back later.</p>';
      }
    }

    // Load Capital Signals
    async function loadCapitalSignals() {
      try {
        const response = await fetch('data/capital_signals.json');
        if (!response.ok) throw new Error('Failed to fetch capital signals');

        let signals = await response.json();
        if (!isDemoMode) signals = signals.filter(s => s.mode === 'live');

        if (signals.length === 0) {
          document.getElementById('funding-count').textContent = '--';
          document.getElementById('funding-summary').textContent = 'No live data yet';
          document.getElementById('capital-signals-list').innerHTML = '<p class="text-slate-400 text-sm col-span-2">No live data yet ‚Äî agents collecting daily</p>';
          return;
        }

        document.getElementById('funding-count').textContent = signals.length;
        document.getElementById('funding-summary').textContent = 'Active opportunities tracked';

        const sorted = signals.sort((a, b) => new Date(b.timestamp) - new Date(a.timestamp)).slice(0, 4);
        document.getElementById('capital-signals-list').innerHTML = sorted.map(s => {
          const amount = s.amount_usd >= 1000000
            ? `$${(s.amount_usd / 1000000).toFixed(1)}M`
            : `$${(s.amount_usd / 1000).toFixed(0)}K`;
          const modeBadge = s.mode === 'live'
            ? '<span class="px-2 py-0.5 rounded bg-emerald-500/20 text-emerald-200 text-[10px]">LIVE</span>'
            : '<span class="px-2 py-0.5 rounded bg-slate-500/20 text-slate-400 text-[10px]">DEMO</span>';
          return `
            <div class="glass rounded-xl p-4 border border-slate-700/50">
              <div class="flex justify-between items-start mb-2">
                <span class="text-emerald-300 font-semibold">${amount}</span>
                <span class="px-2 py-1 rounded bg-amber-500/20 text-amber-200 text-xs">${s.funding_type}</span>
              </div>
              <a href="${s.url}" target="_blank" class="text-slate-100 text-sm font-medium hover:text-emerald-300 transition">${s.title}</a>
              <div class="flex items-center gap-2 mt-2">
                <span class="text-xs text-slate-500">${s.source}</span>
                ${modeBadge}
              </div>
              <p class="text-xs text-slate-400 mt-2">Deadline: ${s.deadline}</p>
            </div>
          `;
        }).join('');
      } catch (error) {
        console.error('Error loading capital signals:', error);
        document.getElementById('capital-signals-list').innerHTML = '<p class="text-slate-400 text-sm col-span-2">Unable to load funding data</p>';
      }
    }

    // Load Technology Updates
    async function loadTechnologyUpdates() {
      try {
        const response = await fetch('data/technology_updates.json');
        if (!response.ok) throw new Error('Failed to fetch technology data');

        let data = await response.json();
        if (!isDemoMode) data = data.filter(d => d.mode === 'live');

        if (data.length === 0) {
          document.getElementById('pathway-economics').innerHTML = '<p class="text-slate-400 text-sm col-span-5">No live data yet</p>';
          document.getElementById('tech-updates-list').innerHTML = '<p class="text-slate-400 text-sm">No live updates yet</p>';
          return;
        }

        // Display pathway economics as visual bars
        const pathways = ['HEFA', 'ETJ', 'AtJ', 'FT', 'Co-processing'];
        const pathwayData = {
          'HEFA': { cost: 4.25, color: 'emerald' },
          'ETJ': { cost: 5.25, color: 'cyan' },
          'AtJ': { cost: 5.75, color: 'blue' },
          'FT': { cost: 6.50, color: 'purple' },
          'Co-processing': { cost: 3.25, color: 'amber' }
        };

        document.getElementById('pathway-economics').innerHTML = pathways.map(p => {
          const d = pathwayData[p];
          const height = Math.min(100, (d.cost / 8) * 100);
          return `
            <div class="text-center">
              <div class="h-24 flex items-end justify-center mb-2">
                <div class="w-12 bg-${d.color}-500/30 rounded-t" style="height: ${height}%">
                  <div class="w-full h-full bg-${d.color}-500/60 rounded-t"></div>
                </div>
              </div>
              <p class="text-lg font-semibold text-${d.color}-300">$${d.cost.toFixed(2)}</p>
              <p class="text-xs text-slate-400">${p}</p>
              <p class="text-[10px] text-slate-500">per gallon</p>
            </div>
          `;
        }).join('');

        // Display tech updates
        const sorted = data.sort((a, b) => new Date(b.timestamp) - new Date(a.timestamp)).slice(0, 3);
        document.getElementById('tech-updates-list').innerHTML = sorted.map(u => {
          const modeBadge = u.mode === 'live'
            ? '<span class="px-2 py-0.5 rounded bg-emerald-500/20 text-emerald-200 text-[10px]">LIVE</span>'
            : '<span class="px-2 py-0.5 rounded bg-slate-500/20 text-slate-400 text-[10px]">DEMO</span>';
          return `
            <div class="glass rounded-lg p-3 border border-slate-700/50">
              <div class="flex items-start justify-between gap-2">
                <a href="${u.url}" target="_blank" class="text-slate-200 text-sm hover:text-cyan-300 transition flex-1">${u.title}</a>
                <span class="px-2 py-1 rounded bg-cyan-500/20 text-cyan-200 text-xs shrink-0">${u.pathway}</span>
              </div>
              <div class="flex items-center gap-2 mt-2">
                <span class="text-xs text-slate-500">${u.source}</span>
                ${modeBadge}
                <span class="text-xs text-slate-500">Impact: ${u.impact_score}%</span>
              </div>
            </div>
          `;
        }).join('');
      } catch (error) {
        console.error('Error loading technology data:', error);
      }
    }

    // Load Market Access Signals
    async function loadMarketSignals() {
      try {
        const response = await fetch('data/market_access.json');
        if (!response.ok) throw new Error('Failed to fetch market data');

        let data = await response.json();
        let signals = data.airline_signals || [];
        if (!isDemoMode) signals = signals.filter(s => s.mode === 'live');

        if (signals.length === 0) {
          document.getElementById('market-signals-list').innerHTML = '<p class="text-slate-400 text-sm">No live market signals yet</p>';
          return;
        }

        const sorted = signals.sort((a, b) => new Date(b.timestamp) - new Date(a.timestamp)).slice(0, 4);
        document.getElementById('market-signals-list').innerHTML = sorted.map(s => {
          const volume = s.volume_tonnes_annual >= 100000
            ? `${(s.volume_tonnes_annual / 1000).toFixed(0)}K tonnes/yr`
            : `${s.volume_tonnes_annual.toLocaleString()} tonnes/yr`;
          const modeBadge = s.mode === 'live'
            ? '<span class="px-2 py-0.5 rounded bg-emerald-500/20 text-emerald-200 text-[10px]">LIVE</span>'
            : '<span class="px-2 py-0.5 rounded bg-slate-500/20 text-slate-400 text-[10px]">DEMO</span>';
          const regionColors = {
            'Africa': 'emerald', 'Europe': 'blue', 'Middle East': 'amber', 'West Africa': 'cyan'
          };
          const color = regionColors[s.region] || 'slate';
          return `
            <div class="glass rounded-xl p-4 border border-slate-700/50 hover:border-purple-500/30 transition">
              <div class="flex items-start justify-between gap-4">
                <div class="flex-1">
                  <div class="flex items-center gap-2 mb-2">
                    <span class="text-purple-300 font-semibold">${s.airline}</span>
                    <span class="px-2 py-0.5 rounded bg-${color}-500/20 text-${color}-200 text-xs">${s.region}</span>
                  </div>
                  <a href="${s.url}" target="_blank" class="text-slate-100 text-sm hover:text-purple-300 transition">${s.title}</a>
                  <div class="flex items-center gap-3 mt-2">
                    <span class="text-xs text-slate-400">${s.signal_type}</span>
                    <span class="text-xs text-emerald-300">${volume}</span>
                    ${modeBadge}
                  </div>
                  <p class="text-xs text-slate-500 mt-2">${s.relevance}</p>
                </div>
              </div>
            </div>
          `;
        }).join('');
      } catch (error) {
        console.error('Error loading market signals:', error);
      }
    }

    // Load Community Pulse and Editorial
    async function loadCommunityPulse() {
      try {
        const response = await fetch('data/community_pulse.json');
        if (!response.ok) throw new Error('Failed to fetch community data');

        const data = await response.json();
        let signals = data.signals || [];
        let editorials = data.editorials || [];
        const sentiment = data.sentiment_summary || {};

        if (!isDemoMode) {
          signals = signals.filter(s => s.mode === 'live');
          editorials = editorials.filter(e => e.mode === 'live');
        }

        // Update sentiment bar
        const score = sentiment.score || 50;
        document.getElementById('sentiment-bar').style.width = `${score}%`;
        document.getElementById('sentiment-label').textContent = sentiment.overall || 'Neutral';

        // Display editorial content
        if (editorials.length > 0) {
          const editorial = editorials[0];
          document.getElementById('editorial-content').innerHTML = `
            <div class="bg-gradient-to-r from-amber-500/10 to-orange-500/10 rounded-xl p-5 border border-amber-500/20">
              <span class="px-2 py-1 rounded bg-amber-500/20 text-amber-200 text-xs mb-3 inline-block">${editorial.theme}</span>
              <h3 class="text-xl font-semibold text-slate-100 mb-3">${editorial.title}</h3>
              <p class="text-slate-300 text-sm leading-relaxed mb-4">${editorial.hook}</p>
              <div class="border-l-2 border-amber-500/50 pl-4 mb-4">
                <p class="text-slate-400 text-sm italic">${editorial.developing_country_angle}</p>
              </div>
              <div class="flex items-center gap-3 text-xs text-slate-500">
                <span>${editorial.author}</span>
                <span>‚Ä¢</span>
                <span>${editorial.estimated_word_count} words</span>
                <span>‚Ä¢</span>
                <span class="px-2 py-0.5 rounded ${editorial.mode === 'live' ? 'bg-emerald-500/20 text-emerald-200' : 'bg-slate-500/20 text-slate-400'}">${editorial.mode === 'live' ? 'LIVE' : 'DEMO'}</span>
              </div>
            </div>
          `;
        }

        // Display community signals
        if (signals.length > 0) {
          const sorted = signals.sort((a, b) => new Date(b.timestamp) - new Date(a.timestamp)).slice(0, 3);
          document.getElementById('community-signals-list').innerHTML = sorted.map(s => {
            const sentimentColors = {
              'Very Positive': 'emerald', 'Positive': 'cyan', 'Neutral': 'slate', 'Concerned': 'amber', 'Negative': 'red'
            };
            const color = sentimentColors[s.sentiment] || 'slate';
            const modeBadge = s.mode === 'live'
              ? '<span class="px-2 py-0.5 rounded bg-emerald-500/20 text-emerald-200 text-[10px]">LIVE</span>'
              : '<span class="px-2 py-0.5 rounded bg-slate-500/20 text-slate-400 text-[10px]">DEMO</span>';
            return `
              <div class="glass rounded-lg p-3 border border-slate-700/50">
                <div class="flex items-start justify-between gap-2">
                  <span class="text-slate-200 text-sm">${s.title}</span>
                  <span class="px-2 py-0.5 rounded bg-${color}-500/20 text-${color}-200 text-xs shrink-0">${s.sentiment}</span>
                </div>
                <div class="flex items-center gap-2 mt-2">
                  <span class="text-xs text-slate-500">${s.source}</span>
                  <span class="text-xs text-slate-600">‚Ä¢</span>
                  <span class="text-xs text-slate-500">${s.region}</span>
                  ${modeBadge}
                </div>
              </div>
            `;
          }).join('');
        } else {
          document.getElementById('community-signals-list').innerHTML = '<p class="text-slate-400 text-sm">No community signals yet</p>';
        }
      } catch (error) {
        console.error('Error loading community pulse:', error);
      }
    }

    // Initialize demo mode toggle and load all data when page loads
    initDemoMode();
    loadLatestPrice();
    loadRegulatoryAlerts();
    loadCapitalSignals();
    loadTechnologyUpdates();
    loadMarketSignals();
    loadCommunityPulse();
  </script>
</body>
</html>
